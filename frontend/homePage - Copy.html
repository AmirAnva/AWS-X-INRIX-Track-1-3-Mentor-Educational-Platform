<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Box Layout</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap');
        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Noto Serif', serif;
            background-color: #f9fafb; /* Original: gray-50 */
        }

        body {
            display: flex;
            flex-direction: column;
            height: 100vh; /* Replaces h-screen */
        }

        .main-container {
            display: flex;
            flex-grow: 1; /* Fills remaining height */
            overflow: hidden; /* Prevents container from scrolling */
        }

        .content-area {
            flex-grow: 1; /* Fills remaining width */
            padding: 2rem; /* p-8 */
            overflow: auto; /* Allows main content to scroll */
        }

        .content-area h1 {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            margin-bottom: 1.5rem; /* mb-6 */
        }

        /* --- Navbar --- */
        .navbar {
            background-color: #000; /* bg-black */
            color: #fff; /* text-white */
            padding: 1rem; /* p-4 */
            display: flex;
            justify-content: space-between; /* justify-between */
            align-items: center; /* items-center */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
            flex-shrink: 0; /* Prevents navbar from shrinking */
        }

        .navbar-brand {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            color: #22c55e; /* CHANGED: from text-red-500 */
        }

        .navbar-links {
            display: flex;
            align-items: center;
            gap: 1.5rem; /* space-x-6 */
        }

        .navbar-links a {
            color: #fff;
            text-decoration: none;
            transition: color 0.2s;
        }

        .navbar-links a:hover {
            color: #d1d5db; /* hover:text-gray-300 */
        }

        .navbar-button {
            background-color: #22c55e; /* CHANGED: from bg-red-500 */
            padding: 0.5rem 1rem; /* px-4 py-2 */
            border-radius: 0.375rem; /* rounded-md */
            transition: background-color 0.2s;
        }

        .navbar-button:hover {
            background-color: #16a34a; /* CHANGED: from hover:bg-red-600 */
            color: #fff; /* Ensure text stays white on hover */
        }
        /* --- Chat Sidebar --- */
        .chat-sidebar {
            width: 20rem; /* w-80 */
            background-color: #fff; /* bg-white */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            display: flex;
            flex-direction: column; /* flex-col */
            flex-shrink: 0; /* flex-shrink-0 */
            border-left: 1px solid #e5e7eb; /* border-l border-gray-200 */
        }

        /* --- Chat Header --- */
        .chat-header {
            
            padding: 1rem; /* p-4 */
            border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
            flex-shrink: 0; /* flex-shrink-0 */
        }

        .chat-header h2 {
            font-family: lexend, sans-serif;
            font-size: 1.25rem; /* text-xl */
            font-weight: 700; /* font-bold */
            margin: 0;
        }

        #mentor-status {
            font-size: 0.875rem; /* text-sm */
            margin: 0;
            color: #6b7280; /* Default: gray-500 */
            transition: color 0.2s;
        }

        /* Status colors from JS */
        #mentor-status.online { color: #22c55e; } /* green-500 */
        #mentor-status.offline { color: #6b7280; } /* gray-500 */
        #mentor-status.away { color: #eab308; } /* yellow-500 */
        #mentor-status.unknown { color: #9ca3af; } /* gray-400 */


        
        .chat-messages {
            flex-grow: 1; /* flex-grow */
            padding: 1rem; /* p-4 */
            display: flex;
            flex-direction: column;
            gap: 1rem; /* space-y-4 */
            overflow: auto; /* overflow-auto */
            background-color: #f9fafb; /* bg-gray-50 */
        }

        /* Scrollbar styles (from original) */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        .chat-messages::-webkit-scrollbar-track {
            background: #e5e7eb; /* gray-200 */
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background-color: #9ca3af; /* gray-400 */
            border-radius: 3px;
        }

        /* --- Message Bubbles --- */
        .message-container {
            display: flex;
        }
        .message-container.received {
            justify-content: flex-start; /* justify-start */
        }
        .message-container.sent {
            justify-content: flex-end; /* justify-end */
        }

        .message-bubble {
            font-family: lexend, sans-serif;
            padding: 0.75rem; /* p-3 */
            max-width: 80%; /* Looser than max-w-xs for flexibility */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            word-wrap: break-word; /* Ensure long words break */
        }
        
        .message-bubble p {
            font-size: 0.875rem; /* text-sm */
            margin: 0;
        }

        .message-bubble.received {
            background-color: #e5e7eb; /* bg-gray-200 */
            color: #1f2937; /* text-gray-800 */
            border-top-right-radius: 0.5rem; /* rounded-r-lg */
            border-bottom-right-radius: 0.5rem;
            border-bottom-left-radius: 0.5rem; /* rounded-bl-lg */
        }
        
        .message-bubble.sent {
            background-color: #3b82f6; /* bg-blue-500 */
            color: #fff; /* text-white */
            border-top-left-radius: 0.5rem; /* rounded-l-lg */
            border-bottom-left-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem; /* rounded-br-lg */
        }

        /* --- Chat Input Area --- */
        .chat-input-area {
            padding: 1rem; /* p-4 */
            border-top: 1px solid #e5e7eb; /* border-t border-gray-200 */
            background-color: #fff; /* bg-white */
            flex-shrink: 0; /* flex-shrink-0 */
        }

        .input-wrapper {
            display: flex;
            align-items: center;
            gap: 0.75rem; /* space-x-3 */
        }

        .chat-input {
            font-family: lexend, sans-serif;

            flex-grow: 1; /* flex-grow */
            border: 1px solid #d1d5db; /* border border-gray-300 */
            border-radius: 9999px; /* rounded-full */
            padding: 0.5rem 1rem; /* py-2 px-4 */
            transition: border-color 0.2s, box-shadow 0.2s; /* transition */
            font-size: 1rem;
        }

        .chat-input:focus {
            outline: none; /* focus:outline-none */
            border-color: #60a5fa; /* Part of ring */
            box-shadow: 0 0 0 2px #60a5fa; /* focus:ring-2 focus:ring-blue-400 */
        }

        .send-button {
            background-color: #3b82f6; /* bg-blue-500 */
            color: #fff; /* text-white */
            border-radius: 9999px; /* rounded-full */
            padding: 0.5rem; /* p-2 */
            height: 2.5rem; /* h-10 */
            width: 2.5rem; /* w-10 */
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            transition: background-color 0.2s, box-shadow 0.2s; /* transition */
        }

        .send-button:hover {
            background-color: #2563eb; /* hover:bg-blue-600 */
        }

        .send-button:focus {
            outline: none; /* focus:outline-none */
            box-shadow: 0 0 0 2px #60a5fa, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* focus:ring-2 (combined with shadow-lg) */
        }

        .send-button svg {
            width: 1.25rem; /* w-5 */
            height: 1.25rem; /* h-5 */
            /*transform: rotate(90deg);  transform rotate-90 */
        }

    </style>

    
    <script>
       
        function getMentorStatus() {
           
        }
        
        function updateMentorStatus() {
            const status = getMentorStatus();
            const statusElement = document.getElementById('mentor-status');
            if (!statusElement) return; 
            statusElement.classList.remove('online', 'offline', 'away', 'unknown');

            switch (status) {
                case 'ONLINE':
                    statusElement.textContent = 'Online';
                    statusElement.classList.add('online');
                    break;
                case 'OFFLINE':
                    statusElement.textContent = 'Offline';
                    statusElement.classList.add('offline');
                    break;
                case 'AWAY':
                    statusElement.textContent = 'Away';
                    statusElement.classList.add('away');
                    break;
                default:
                    statusElement.textContent = 'Unknown';
                    statusElement.classList.add('unknown');
            }
        }

        function saveMessageToDatabase(messageText) {
            console.log("Pretending to save sum bs");
           
        }

        
        function appendSentMessage(messageText) {
            // Find the chat window
            const chatWindow = document.getElementById('chat-messages-container');
            if (!chatWindow) return; 

            // Create all the new HTML elements
            const container = document.createElement('div');
            container.className = 'message-container sent'; // Aligns to the right

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble sent'; // Styles as a blue bubble

            const textElement = document.createElement('p');
            textElement.textContent = messageText; // Adds the user's text

            
            bubble.appendChild(textElement);
            container.appendChild(bubble);

           
            chatWindow.appendChild(container);

            
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        function handleSendMessage() {
            const input = document.getElementById('chat-input');
            if (!input) return; 

            const messageText = input.value.trim(); // remove whitespace

            
            if (messageText === "") {
                return;
            }
           
           
            //Thanks very much !!!!


            // Call  (empty) database function
            saveMessageToDatabase(messageText);

           
            appendSentMessage(messageText);

           //clear
            input.value = '';
        }

        function appendReceivedMessage(messageText) {
            // Find the chat window
            const chatWindow = document.getElementById('chat-messages-container');
            if (!chatWindow) return; 

            //  the outer container
            const container = document.createElement('div');
            //  KEEP left
            container.className = 'message-container received'; 

            // make the message bubble
            const bubble = document.createElement('div');
           
            bubble.className = 'message-bubble received'; 

            // make the text paragraph
            const textElement = document.createElement('p');
            textElement.textContent = messageText; // Adds the mentor's text
            
            console.log("testing appendReceivedMessage IT WORKEDS");

            // <p> inside <bubble> inside <container>
            bubble.appendChild(textElement);
            container.appendChild(bubble);

            // the new message to the end of the chat window
            chatWindow.appendChild(container);

            // bottom so the new message is visible
            chatWindow.scrollTop = chatWindow.scrollHeight;

            
        }

        function processNewMentorMessage(messageData) {
            
            console.log("testing processNewMentorMessage");

            
            appendReceivedMessage(messageData.text);
        }





        
        // EVENT LISTENERS
        document.addEventListener('DOMContentLoaded', () => {
           
            updateMentorStatus();
            setInterval(updateMentorStatus, 3000);

            
            const sendButton = document.getElementById('send-button');
            if (sendButton) {
                sendButton.addEventListener('click', handleSendMessage);
            }

            
            const chatInput = document.getElementById('chat-input');
            if (chatInput) {
                chatInput.addEventListener('keypress', (event) => {
                    // Check if the key pressed was Enter
                    if (event.key === 'Enter') {
                        event.preventDefault(); // Stop it from adding a new line
                        handleSendMessage();
                    }
                });
            }
        });
    </script>

</head>
<body>
 
    <nav class="navbar">
        <div class="navbar-brand">Mentor++</div>
        <div class="navbar-links">
            <a href="#">Profile</a>
            <a href="#">OverWatch</a>
            <a href="#">Assignments</a>
            <a href="#" class="navbar-button">Scratch Pad</a>
        </div>
    </nav>

    <div class="main-container"> 
    
        <main class="content-area">
            <h1>FILELR</h1>
            <p>
                IM gonna not do the rest of the home page since the focus is on the chat box redesign. 
            </p>
        </main>

        <aside class="chat-sidebar">
            
            <div class="chat-header">
                <h2>Chat with Mentor</h2>
                <p id="mentor-status">Loading...</p>
            </div>
            
            <div class="chat-messages" id="chat-messages-container">
                
                <div class="message-container received">
                    <div class="message-bubble received">
                        <p>Hey, how's that first assignment coming along?</p>
                    </div>
                </div>
                
                <div class="message-container sent">
                    <div class="message-bubble sent">
                        <p>Going well! Just had a quick question about the first part.</p>
                    </div>
                </div>

            </div>
            
            <div class="chat-input-area">
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        placeholder="Type your message..."
                        class="chat-input"
                        id="chat-input" >
                    <button class="send-button" id="send-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" fill="none" viewBox="0 0 75 75"><path fill="#000" d="m17.545 44.617-1.711 12.219c-.09.621.12 1.25.57 1.691.379.38.89.59 1.41.59.09 0 .18 0 .281-.02l12.22-1.699 16.948 16.95c.38.378.891.59 1.41.59q.226-.002.45-.052a2.01 2.01 0 0 0 1.441-1.3l24.27-70.95.031-.12a1 1 0 0 0 .04-.18 1 1 0 0 0 .02-.18c0-.058.01-.11.01-.172 0-.058 0-.12-.01-.18 0-.05 0-.109-.02-.16-.012-.058-.032-.12-.04-.18-.011-.05-.03-.1-.05-.16-.02-.058-.051-.12-.078-.179a.4.4 0 0 1-.04-.102c0-.011-.019-.02-.019-.039a1 1 0 0 0-.11-.16c-.03-.039-.058-.09-.09-.129l-.12-.12c-.04-.04-.078-.09-.13-.13q-.056-.044-.12-.09c-.051-.039-.11-.078-.172-.109-.012 0-.02-.02-.04-.02a.4.4 0 0 0-.1-.039 1 1 0 0 0-.18-.078c-.051-.02-.102-.03-.16-.05a1 1 0 0 0-.18-.04c-.059 0-.11-.011-.172-.019h-.18c-.059 0-.11 0-.172.012-.058 0-.12.011-.18.02-.058.011-.109.03-.171.038-.04.012-.078.02-.13.032L1.355 24.356c-.649.218-1.14.77-1.301 1.441a2.02 2.02 0 0 0 .531 1.871l16.95 16.95zm3.988.36 39.48-31.06-31.06 39.48-9.78 1.372 1.37-9.782zm26.293 24.27-14.13-14.13L67.249 12.47 47.826 69.25zm14.637-61.56L19.822 41.238 5.692 27.11 62.475 7.687z"/>
                        </svg>
                    </button>
                </div>
            </div>

        </aside>
        
    </div>

</body>
</html>